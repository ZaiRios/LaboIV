<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DriveAr - Renault Sandero 1.6 16v Life</title>
    <link rel="icon" type="image/x-icon" href="images/favicon.ico">
    <link rel="stylesheet" href="css/estilos.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <header>
        <a href="index.html">
            <img src="images/Logo_DriveAr.png" alt="Logo DriveAr" class="logo">
        </a>
        <nav style="background-color: white; color: white;">
            <ul>
                <li><a href="index.html">Inicio</a></li>
                <li><a href="como-funciona.html">Cómo Funciona</a></li>
                <li><a href="preguntas.html">Preguntas Frecuentes</a></li>
                <li><a href="Contacto.html">Contacto</a></li>
                <li><a href="publicar.html">Ser Anfitrión</a></li>
               
                <div class="hamburger-menu">
                    <span></span>
                    <div class="menu-content">
                        <a href="#" id="hamburgerAuthLink">Ingreso/Registro</a>
                    </div>
                </div>
            </ul>
        </nav>
    </header>

    <main class="detalle-auto">
        <div class="auto-header">
            <h1>Renault Sandero 1.6 16v Life</h1>
            <p class="precio">$55,000 por día</p>
        </div>

        <div class="auto-imagen">
            <img src="images/RenaultSandero.webp" alt="Renault Sandero 1.6 16v Life">
        </div>

        <div class="auto-descripcion">
            <p>Revolucionario y moderno con la más alta seguridad.</p>
            <p>Motor 1.6 16v</p>
            <p>Caja manual.</p>
            <p>Tracción delantera.</p>
            <p>Hermoso 0 km para la ciudad o ruta cómodo y confortable. Recibimos transferencia efectivo y tarjeta de crédito.</p>
            <p>Apple/Android Car play.</p>
            <p>Bluetooth. Pantalla para navegación con Waze, Youtube y Spotify.</p>
            <p>Consultar por alquiler de silla de bebé.</p>
        </div>

        <section class="info-section">
            <h2>Información básica</h2>
            <div class="iconos-grid">
                <div class="icono-item">
                    <img src="iconos/icons8-información-30.png" alt="Año">
                    <p>Año 2021</p>
                </div>
                <div class="icono-item">
                    <img src="iconos/icons8-gearbox-24.png" alt="Transmisión">
                    <p>Manual</p>
                </div>
                <div class="icono-item">
                    <img src="iconos/icons8-puerta-de-automóvil-24.png" alt="Puertas">
                    <p>5 Puertas</p>
                </div>
                <div class="icono-item">
                    <img src="iconos/icons8-dispensador-de-gasolina-50.png" alt="Combustible">
                    <p>Nafta</p>
                </div>
            </div>
        </section>

        <section class="info-section">
            <h2>Características</h2>
            <div class="iconos-grid">
                <div class="icono-item">
                    <img src="iconos/icons8-car-seat-50.png" alt="Pasajeros">
                    <p>5 Pasajeros</p>
                </div>
                <div class="icono-item">
                    <img src="iconos/icons8-equipaje-64.png" alt="Equipaje">
                    <p>2 maletas</p>
                </div>
                <div class="icono-item">
                    <img src="iconos/icons8-aire-acondicionado-50.png" alt="Aire acondicionado">
                    <p>A/A</p>
                </div>
                <div class="icono-item">
                    <img src="iconos/icons8-airbag-activado-50.png" alt="Airbags">
                    <p>Airbags</p>
                </div>
                <div class="icono-item">
                    <img src="iconos/icons8-frenosabs-50.png" alt="Frenos ABS">
                    <p>Frenos ABS</p>
                </div>
                <div class="icono-item">
                    <img src="iconos/icons8-levanta-cristales-50.png" alt="Levanta cristales">
                    <p>Levanta cristales</p>
                </div>
                <div class="icono-item">
                    <img src="iconos/icons8-bluetooth-50.png" alt="Bluetooth">
                    <p>Bluetooth</p>
                </div>
                <div class="icono-item">
                    <img src="iconos/icons8-usb-50.png" alt="USB">
                    <p>Entrada USB</p>
                </div>
            </div>
        </section>

        <section class="info-section">
            <h2>Normas de uso</h2>
            <div class="iconos-grid">
                <div class="icono-item">
                    <img src="iconos/icons8-kms-ilimitados-24.png" alt="Kilómetros">
                    <p>Kms ilimitados</p>
                </div>
                <div class="icono-item">
                    <img src="iconos/icons8-no-fumar-50.png" alt="No fumar">
                    <p>No fumar</p>
                </div>
                <div class="icono-item">
                    <img src="iconos/icons8-seguro-completo-50.png" alt="Seguro">
                    <p>Seguro completo con franquicia</p>
                </div>
            </div>
        </section>

        <section class="info-section">
            <h2>Servicios extras</h2>
            <div class="iconos-grid">
                <div class="icono-item">
                    <img src="iconos/icons8-asiento-de-coche-de-bebé-50.png" alt="Silla de bebé">
                    <p>Silla de bebé</p>
                </div>
                <div class="icono-item">
                    <img src="iconos/icons8-despegue-50.png" alt="Traslado">
                    <p>Traslado al aeropuerto</p>
                </div>
                <div class="icono-item">
                    <img src="iconos/icons8-aterrizaje-50.png" alt="Devolución">
                    <p>Devolución al aeropuerto</p>
                </div>
            </div>
        </section>

        <section class="info-section">
            <h2>Ubicación</h2>
            <p class="ubicacion">Ramos Mejía, Buenos Aires</p>
        </section>

        <section class="info-section">
            <h2>Opiniones sobre el propietario</h2>
            <div class="opiniones">
                <!-- Aquí irían las opiniones -->
            </div>
        </section>

        <div class="reserva-section">
            <button id="reservarBtn" class="btn-primary">Reservar Ahora</button>
        </div>

        <!-- Modal de Reserva -->
        <div id="reservaModal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2>Completar Reserva</h2>
                <form id="reservaForm">
                    <div class="form-group">
                        <label for="nombre">Nombre completo</label>
                        <input type="text" id="nombre" name="nombre" required>
                    </div>
                    <div class="form-group">
                        <label for="email">Email</label>
                        <input type="email" id="email" name="email" required>
                    </div>
                    <div class="form-group">
                        <label for="telefono">Teléfono</label>
                        <input type="tel" id="telefono" name="telefono" required>
                    </div>
                    <div class="form-group">
                        <label for="fechaInicio">Fecha de inicio</label>
                        <input type="date" id="fechaInicio" name="fechaInicio" required>
                    </div>
                    <div class="form-group">
                        <label for="fechaFin">Fecha de fin</label>
                        <input type="date" id="fechaFin" name="fechaFin" required>
                    </div>
                    <div class="form-group">
                        <label>Opción de Franquicia</label>
                        <div class="franquicia-options">
                            <div class="franquicia-option">
                                <input type="radio" id="franquicia-completa" name="franquicia" value="completa" checked>
                                <label for="franquicia-completa">
                                    <span class="franquicia-title">Franquicia Completa</span>
                                    <span class="franquicia-amount">ARS 480.000</span>
                                    <span class="franquicia-description">Depósito en garantía estándar</span>
                                </label>
                            </div>
                            <div class="franquicia-option">
                                <input type="radio" id="franquicia-reducida" name="franquicia" value="reducida">
                                <label for="franquicia-reducida">
                                    <span class="franquicia-title">Franquicia Reducida</span>
                                    <span class="franquicia-amount">ARS 240.000</span>
                                    <span class="franquicia-description">Depósito en garantía reducido</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Información de la Tarjeta de Crédito</label>
                        <div id="card-container"></div>
                        <div class="card-info">
                            <p><i class="fas fa-info-circle"></i> El depósito será retenido 48 horas antes del inicio del alquiler</p>
                            <p><i class="fas fa-info-circle"></i> La liberación se realizará 48 horas después de finalizar el alquiler</p>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Método de pago</label>
                        <div id="wallet_container"></div>
                    </div>
                    <button type="submit" class="btn-primary">Confirmar Reserva</button>
                </form>
            </div>
        </div>
    </main>

    <footer>
        <div class="social-icons">
            <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
            <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
            <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
            <a href="#" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
        </div>
        <nav>
            <a href="index.html">Inicio</a>
            <a href="como-funciona.html">Cómo Funciona</a>
            <a href="preguntas.html">Preguntas frecuentes</a>
            <a href="Contacto.html">Contacto</a>
            <a href="publicar.html">Ser Anfitrión</a>
        </nav>
        <div style="margin-top: 10px;">
            &copy; 2025 DriveAR. Todos los derechos reservados.
        </div>
        <div style="margin-top: 10px;">
            <a href="#">Política de privacidad</a> | <a href="#">Términos de uso</a>
        </div>
    </footer>

    <button id="scroll-top" onclick="window.scrollTo({top: 0, behavior: 'smooth'})" style="position: fixed; bottom: 20px; right: 20px; background-color: #b06d13; color: white; border: none; padding: 10px; border-radius: 5px; cursor: pointer;">
        <i class="fas fa-arrow-up"></i>
    </button>
    <script src="js/main.js"></script>

    <!-- Mercado Pago SDK -->
    <script src="https://sdk.mercadopago.com/js/v2"></script>
    <script>
    // Inicializar el SDK de Mercado Pago
    const mp = new MercadoPago('TU_PUBLIC_KEY', {
        locale: 'es-AR'
    });

    // Modal
    const modal = document.getElementById('reservaModal');
    const btn = document.getElementById('reservarBtn');
    const span = document.getElementsByClassName('close')[0];
    const modalContent = document.querySelector('.modal-content');

    btn.onclick = function() {
        modal.style.display = "block";
        document.body.style.overflow = "hidden"; // Prevenir scroll del body
    }

    span.onclick = function() {
        modal.style.display = "none";
        document.body.style.overflow = "auto"; // Restaurar scroll del body
    }

    window.onclick = function(event) {
        if (event.target == modal) {
            modal.style.display = "none";
            document.body.style.overflow = "auto"; // Restaurar scroll del body
        }
    }

    // Prevenir que el modal se cierre al hacer clic en su contenido
    modalContent.onclick = function(event) {
        event.stopPropagation();
    }

    // Ajustar el scroll del modal cuando se abre
    function adjustModalScroll() {
        if (modal.style.display === "block") {
            modal.scrollTop = 0;
        }
    }

    // Observar cambios en el display del modal
    const observer = new MutationObserver(function(mutations) {
        mutations.forEach(function(mutation) {
            if (mutation.attributeName === "style") {
                adjustModalScroll();
            }
        });
    });

    observer.observe(modal, { attributes: true });

    // Crear el contenedor para la tarjeta
    const cardContainer = document.getElementById('card-container');
    const cardForm = mp.cardForm({
        amount: "480000",
        autoMount: true,
        form: {
            id: "form-checkout",
            cardholderName: {
                id: "form-checkout__cardholderName",
                placeholder: "Titular de la tarjeta",
            },
            cardholderEmail: {
                id: "form-checkout__cardholderEmail",
                placeholder: "E-mail",
            },
            cardNumber: {
                id: "form-checkout__cardNumber",
                placeholder: "Número de la tarjeta",
            },
            cardExpirationMonth: {
                id: "form-checkout__cardExpirationMonth",
                placeholder: "Mes",
            },
            cardExpirationYear: {
                id: "form-checkout__cardExpirationYear",
                placeholder: "Año",
            },
            securityCode: {
                id: "form-checkout__securityCode",
                placeholder: "Código de seguridad",
            },
            installments: {
                id: "form-checkout__installments",
                placeholder: "Cuotas",
            },
            identificationType: {
                id: "form-checkout__identificationType",
                placeholder: "Tipo de documento",
            },
            identificationNumber: {
                id: "form-checkout__identificationNumber",
                placeholder: "Número de documento",
            },
            issuer: {
                id: "form-checkout__issuer",
                placeholder: "Banco emisor",
            },
        },
        callbacks: {
            onFormMounted: error => {
                if (error) return console.warn("Form Mounted handling error: ", error);
            },
            onSubmit: event => {
                event.preventDefault();
                const formData = cardForm.getCardFormData();
                // Aquí puedes manejar los datos del formulario
            },
            onError: error => {
                console.warn("Form handling error: ", error);
            }
        }
    });

    // Manejar el cambio en la opción de franquicia
    document.querySelectorAll('input[name="franquicia"]').forEach(radio => {
        radio.addEventListener('change', function() {
            const amount = this.value === 'completa' ? '480000' : '240000';
            cardForm.update({ amount });
        });
    });

    // Manejar el envío del formulario
    document.getElementById('reservaForm').addEventListener('submit', async function(e) {
        e.preventDefault();
        
        const formData = {
            car_name: 'Volvo C40 Ultimate',
            price_per_day: 150000,
            start_date: document.getElementById('fechaInicio').value,
            end_date: document.getElementById('fechaFin').value,
            nombre: document.getElementById('nombre').value,
            email: document.getElementById('email').value,
            telefono: document.getElementById('telefono').value
        };

        try {
            const response = await fetch('procesar_reserva.php', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(formData)
            });

            const data = await response.json();

            if (data.success) {
                // Crear el botón de pago
                const checkout = mp.checkout({
                    preference: {
                        id: data.preference_id
                    },
                    render: {
                        container: '#wallet_container',
                        label: 'Pagar'
                    }
                });
            } else {
                alert('Error al procesar la reserva: ' + data.error);
            }
        } catch (error) {
            console.error('Error:', error);
            alert('Error al procesar la reserva');
        }
    });
    </script>
</body>
</html> 